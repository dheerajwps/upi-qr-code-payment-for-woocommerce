function upiwcIsNumber(e){e=e||window.event;let n=e.which?e.which:e.keyCode;return!(8!=n&&0!=n&&n>31&&(n<48||n>57))}function upiwcStartTimer(e,n){function t(){o=e-((Date.now()-u)/1e3|0),i=o/60|0,c=o%60|0,i=i<10?"0"+i:i,c=c<10?"0"+c:c,n.textContent=i+":"+c,o<=0&&(u=Date.now()+1e3)}let o,i,c,a,u=Date.now();clearTimeout(a),t(),a=setInterval(t,1e3),setTimeout(function(){clearTimeout(a)},1e3*e)}(function(e){"use strict";if("undefined"==typeof upiwc_params)return!1;1==upiwc_params.prevent_reload&&(window.onbeforeunload=function(){return"Are you sure you want to leave?"});let n="375px",t=40;"yes"==upiwc_params.is_mobile&&(n="100%",t=0);let o="upi://pay?pa="+upiwc_params.payee_vpa+"&pn="+upiwc_params.payee_name+"&am="+upiwc_params.order_amount+"&tr="+upiwc_params.order_key.replace("wc_order_","")+"&mc="+upiwc_params.mc_code+"&cu=INR&tn=ORDER ID "+upiwc_params.order_number,i=encodeURI(o);e("body").on("contextmenu","#upiwc-payment-qr-code img",function(e){return!1}),e("body").on("click","#upiwc-cancel-payment",function(e){e.preventDefault(),window.onbeforeunload=null,window.location=upiwc_params.cancel_url}),e("body").on("click",".upiwc-return-link",function(e){e.preventDefault(),window.onbeforeunload=null,window.location=upiwc_params.payment_url}),e("body").on("click","#upiwc-confirm-payment",function(o){o.preventDefault();let c='<span class="payment-amount">â‚¹ '+upiwc_params.order_amount+"</span>";""!=upiwc_params.payer_vpa&&(c+='<span class="upi-id">'+upiwc_params.payer_vpa+"</span>");e.confirm({title:e("body").find(".upiwc-modal-header").html(),content:e("body").find(".upiwc-modal-content").html(),useBootstrap:!1,animation:"scale",boxWidth:n,draggable:!1,offsetBottom:t,offsetTop:t,closeIcon:!0,onContentReady:function(){let e,n=this;n.$content.find(".upiwc-payment-upi-id").on("click",function(t){t.preventDefault(),clearTimeout(e),navigator.clipboard.writeText(upiwc_params.payee_vpa).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)}),n.$content.find(".upiwc-payment-upi-id").text("Copied!"),e=setTimeout(function(){n.$content.find(".upiwc-payment-upi-id").text(upiwc_params.payee_vpa)},1e3)}),n.$content.find("#upiwc-payment-transaction-number").on("input",function(e){n.$content.find(".upiwc-payment-error").hide()}),n.$content.find("#upi-pay").on("click",function(e){e.preventDefault(),window.onbeforeunload=null,window.open(i)});let t=n.$content.find("#upiwc-payment-qr-code img").attr("src");n.$content.find("#upi-download").on("click",function(e){e.preventDefault();let n=document.createElement("a");n.href=t,n.download="QR Code.png",n.click()}),upiwc_params.can_intent&&setTimeout(function(){window.onbeforeunload=null,window.open(i)},1e3);let o=parseInt(upiwc_params.btn_show_interval);o&&o>=1e3?(1==upiwc_params.btn_timer&&upiwcStartTimer(o/1e3,document.querySelector(".btn.next")),setTimeout(function(){n.buttons.nextStep.setText("Proceed to Next"),n.buttons.nextStep.enable()},o)):(n.buttons.nextStep.setText("Proceed to Next"),n.buttons.nextStep.enable())},onClose:function(){e("#upiwc-processing").hide(),e("#upiwc-confirm-payment, #upiwc-cancel-payment, .upiwc-return-link").fadeIn("slow"),e(".upiwc-waiting-text").text("Please click the Pay Now button below to complete the payment against this order.")},buttons:{amount:{text:c,btnClass:"amount",action:function(){return!1}},nextStep:{text:"Waiting...",btnClass:"next",isDisabled:!0,action:function(){let e=this;return e.$content.find(".upiwc-payment-confirm").show(),e.$content.find(".upiwc-payment-info, .upiwc-payment-qr-code").hide(),e.$closeIcon.hide(),e.buttons.amount.hide(),e.buttons.nextStep.hide(),e.buttons.back.show(),e.buttons.confirm.show(),!1}},back:{text:"Back",isHidden:!0,btnClass:"back",action:function(){let e=this;return e.$content.find(".upiwc-payment-confirm").hide(),e.$content.find(".upiwc-payment-info, .upiwc-payment-qr-code").show(),e.buttons.amount.show(),e.buttons.nextStep.show(),e.buttons.back.hide(),e.buttons.confirm.hide(),e.$closeIcon.show(),!1}},confirm:{text:"Confirm",isHidden:!0,action:function(){let n=this,t=n.$content.find("#upiwc-payment-transaction-number").val();if(void 0!==t&&void 0!==t){if(""!=t&&12!=t.length)return n.$content.find(".upiwc-payment-error").text("Transaction ID should be of 12 digits!").show(),!1;if("show_require"===upiwc_params.transaction_id&&""==t)return n.$content.find(".upiwc-payment-error").text("Transaction ID is required!").show(),!1}n.buttons.confirm.disable(),n.buttons.back.disable(),n.buttons.confirm.setText("Processing...");let o="";return void 0!==t&&void 0!==t&&""!=t&&(o='<input type="hidden" name="wc_transaction_id" value="'+t+'"></input>'),window.onbeforeunload=null,e("#upiwc-payment-success-container").html('<form method="POST" action="'+upiwc_params.callback_url+'" id="UPIJSCheckoutForm" style="display: none;"><input type="hidden" name="wc_order_id" value="'+upiwc_params.order_id+'"><input type="hidden" name="wc_order_key" value="'+upiwc_params.order_key+'">'+o+"</form>"),e("body").find("#UPIJSCheckoutForm").submit(),!1}}}});e("#upiwc-processing").show(),e("#upiwc-confirm-payment, #upiwc-cancel-payment, .upiwc-return-link").hide(),e(".upiwc-waiting-text").text("Please wait and don't press back or refresh this page while we are processing your payment...")}),e("#upiwc-payment-qr-code").length?new QRCode("upiwc-payment-qr-code",{text:i,width:200,height:200,correctLevel:QRCode.CorrectLevel.H,quietZone:8,onRenderingEnd:function(){e("#upiwc-confirm-payment").trigger("click")}}):e("#upiwc-confirm-payment").trigger("click")})(jQuery);