function isNumberUpiwc(n){n=n||window.event;let e=n.which?n.which:n.keyCode;return!(8!=e&&0!=e&&e>31&&(e<48||e>57))}(function(n){"use strict";if("undefined"==typeof upiwc_params)return!1;1==upiwc_params.prevent_reload&&(window.onbeforeunload=function(){return"Are you sure you want to leave?"});let e="375px",t=40;"yes"==upiwc_params.is_mobile&&(e="100%",t=0);let o="upi://pay?pa="+upiwc_params.payee_vpa+"&pn="+upiwc_params.payee_name+"&am="+upiwc_params.order_amount+"&tr="+upiwc_params.order_key.replace("wc_order_","")+"&mc="+upiwc_params.mc_code+"&cu=INR&tn=ORDER ID "+upiwc_params.order_number,i=encodeURI(o);n("#upiwc-payment-qr-code").length&&new QRCode("upiwc-payment-qr-code",{text:i,width:200,height:200,correctLevel:QRCode.CorrectLevel.H,quietZone:8,onRenderingEnd:function(){n("#upiwc-confirm-payment").trigger("click")}}),n("body").on("contextmenu","#upiwc-payment-qr-code img",function(n){return!1}),n("body").on("click","#upiwc-cancel-payment",function(n){n.preventDefault(),window.onbeforeunload=null,window.location=upiwc_params.cancel_url}),n("body").on("click",".upiwc-return-link",function(n){n.preventDefault(),window.onbeforeunload=null,window.location=upiwc_params.payment_url}),n("body").on("click","#upiwc-confirm-payment",function(o){o.preventDefault();let c='<span class="payment-amount">â‚¹ '+upiwc_params.order_amount+"</span>";""!=upiwc_params.payer_vpa&&(c+='<span class="upi-id">'+upiwc_params.payer_vpa+"</span>");n.confirm({title:n("body").find(".upiwc-modal-header").html(),content:n("body").find(".upiwc-modal-content").html(),useBootstrap:!1,animation:"scale",boxWidth:e,draggable:!1,offsetBottom:t,offsetTop:t,closeIcon:!0,onContentReady:function(){let n,e=this;e.$content.find(".upiwc-payment-upi-id").on("click",function(t){t.preventDefault(),clearTimeout(n),navigator.clipboard.writeText(upiwc_params.payee_vpa).then(function(){console.log("Async: Copying to clipboard was successful!")},function(n){console.error("Async: Could not copy text: ",n)}),e.$content.find(".upiwc-payment-upi-id").text("Copied!"),n=setTimeout(function(){e.$content.find(".upiwc-payment-upi-id").text(upiwc_params.payee_vpa)},1e3)}),e.$content.find("#upiwc-payment-transaction-number").on("input",function(n){e.$content.find(".upiwc-payment-error").hide()}),e.$content.find(".btn-upi-pay").on("click",function(n){n.preventDefault(),window.onbeforeunload=null,window.location=i});let t=e.$content.find("#upiwc-payment-qr-code img").attr("src");e.$content.find("#upi-download").on("click",function(n){n.preventDefault(),console.log(t);let e=document.createElement("a");e.href=t,e.download="QR Code.png",e.click(),console.log(e)})},onClose:function(){n("#upiwc-processing").hide(),n("#upiwc-confirm-payment, #upiwc-cancel-payment, .upiwc-return-link").fadeIn("slow"),n(".upiwc-waiting-text").text("Please click the Pay Now button below to complete the payment against this order.")},buttons:{amount:{text:c,btnClass:"amount",action:function(){return!1}},back:{text:"Back",isHidden:!0,btnClass:"back",action:function(){let n=this;return n.$content.find(".upiwc-payment-confirm").hide(),n.$content.find(".upiwc-payment-info, .upiwc-payment-qr-code").show(),n.buttons.amount.show(),n.buttons.nextStep.show(),n.buttons.back.hide(),n.buttons.confirm.hide(),n.$closeIcon.show(),!1}},confirm:{text:"Confirm",isHidden:!0,action:function(){let e=this,t=e.$content.find("#upiwc-payment-transaction-number").val();if(""!=t&&12!=t.length)return e.$content.find(".upiwc-payment-error").text("Transaction ID should be of 12 digits!").show(),!1;if("show_require"===upiwc_params.transaction_id&&""==t)return e.$content.find(".upiwc-payment-error").text("Transaction ID is required!").show(),!1;e.buttons.confirm.disable(),e.buttons.back.disable(),e.buttons.confirm.setText("Processing...");let o="";return""!=t&&(o='<input type="hidden" name="wc_transaction_id" value="'+t+'"></input>'),window.onbeforeunload=null,n("#upiwc-payment-success-container").html('<form method="POST" action="'+upiwc_params.callback_url+'" id="UPIJSCheckoutForm" style="display: none;"><input type="hidden" name="wc_order_id" value="'+upiwc_params.order_id+'"><input type="hidden" name="wc_order_key" value="'+upiwc_params.order_key+'">'+o+"</form>"),n("#UPIJSCheckoutForm").submit(),!1}},nextStep:{text:"Proceed to Next",action:function(){let n=this;return n.$content.find(".upiwc-payment-confirm").show(),n.$content.find(".upiwc-payment-info, .upiwc-payment-qr-code").hide(),n.$closeIcon.hide(),n.buttons.amount.hide(),n.buttons.nextStep.hide(),n.buttons.back.show(),n.buttons.confirm.show(),!1}}}});n("#upiwc-processing").show(),n("#upiwc-confirm-payment, #upiwc-cancel-payment, .upiwc-return-link").hide(),n(".upiwc-waiting-text").text("Please wait and don't press back or refresh this page while we are processing your payment...")}).trigger("click")})(jQuery);